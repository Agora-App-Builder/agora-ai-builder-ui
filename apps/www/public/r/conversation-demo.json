{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "conversation-demo",
  "type": "registry:ui",
  "description": "A complete conversation component demo with streaming messages",
  "registryDependencies": [
    "conversation",
    "message",
    "response",
    "avatar"
  ],
  "files": [
    {
      "path": "examples/conversation-demo.tsx",
      "content": "\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { MessageCircle, User } from \"lucide-react\"\n\nimport { Avatar } from \"@/components/ui/avatar\"\nimport {\n  Conversation,\n  ConversationContent,\n  ConversationEmptyState,\n  ConversationScrollButton,\n} from \"@/components/ui/conversation\"\nimport { Message, MessageContent } from \"@/components/ui/message\"\nimport { Response } from \"@/components/ui/response\"\n\nconst allMessages = [\n  {\n    id: \"1\",\n    role: \"user\" as const,\n    text: \"Hey, I need help with my order\",\n  },\n  {\n    id: \"2\",\n    role: \"assistant\" as const,\n    tokens: [\n      \"Hi!\",\n      \" I'd\",\n      \" be\",\n      \" happy\",\n      \" to\",\n      \" help\",\n      \" you\",\n      \" with\",\n      \" your\",\n      \" order.\",\n      \" Could\",\n      \" you\",\n      \" please\",\n      \" provide\",\n      \" your\",\n      \" order\",\n      \" number?\",\n    ],\n    text: \"Hi! I'd be happy to help you with your order. Could you please provide your order number?\",\n  },\n  {\n    id: \"3\",\n    role: \"user\" as const,\n    text: \"It's ORDER-12345\",\n  },\n  {\n    id: \"4\",\n    role: \"assistant\" as const,\n    tokens: [\n      \"Thank\",\n      \" you!\",\n      \" Let\",\n      \" me\",\n      \" pull\",\n      \" up\",\n      \" your\",\n      \" order\",\n      \" details.\",\n      \" I\",\n      \" can\",\n      \" see\",\n      \" that\",\n      \" your\",\n      \" order\",\n      \" was\",\n      \" placed\",\n      \" on\",\n      \" March\",\n      \" 15th\",\n      \" and\",\n      \" is\",\n      \" currently\",\n      \" being\",\n      \" processed.\",\n      \" It\",\n      \" should\",\n      \" ship\",\n      \" within\",\n      \" the\",\n      \" next\",\n      \" 1-2\",\n      \" business\",\n      \" days.\",\n      \" Is\",\n      \" there\",\n      \" anything\",\n      \" specific\",\n      \" you'd\",\n      \" like\",\n      \" to\",\n      \" know\",\n      \" about\",\n      \" this\",\n      \" order?\",\n    ],\n    text: \"Thank you! Let me pull up your order details. I can see that your order was placed on March 15th and is currently being processed. It should ship within the next 1-2 business days. Is there anything specific you'd like to know about this order?\",\n  },\n  {\n    id: \"5\",\n    role: \"user\" as const,\n    text: \"Can I change the shipping address?\",\n  },\n  {\n    id: \"6\",\n    role: \"assistant\" as const,\n    tokens: [\n      \"Absolutely!\",\n      \" Since\",\n      \" the\",\n      \" order\",\n      \" hasn't\",\n      \" shipped\",\n      \" yet,\",\n      \" I\",\n      \" can\",\n      \" update\",\n      \" the\",\n      \" shipping\",\n      \" address\",\n      \" for\",\n      \" you.\",\n      \" What\",\n      \" would\",\n      \" you\",\n      \" like\",\n      \" the\",\n      \" new\",\n      \" address\",\n      \" to\",\n      \" be?\",\n    ],\n    text: \"Absolutely! Since the order hasn't shipped yet, I can update the shipping address for you. What would you like the new address to be?\",\n  },\n]\n\nexport default function ConversationDemo() {\n  const [messages, setMessages] = useState<typeof allMessages>([])\n  const [streamingMessageIndex, setStreamingMessageIndex] = useState<\n    number | null\n  >(null)\n  const [streamingContent, setStreamingContent] = useState(\"\")\n\n  useEffect(() => {\n    const timeouts: NodeJS.Timeout[] = []\n    const intervals: NodeJS.Timeout[] = []\n    let currentMessageIndex = 0\n\n    const addNextMessage = () => {\n      if (currentMessageIndex >= allMessages.length) return\n\n      const message = allMessages[currentMessageIndex]\n\n      if (\n        message.role === \"assistant\" &&\n        \"tokens\" in message &&\n        message.tokens\n      ) {\n        setStreamingMessageIndex(currentMessageIndex)\n        setStreamingContent(\"\")\n\n        let currentContent = \"\"\n        let tokenIndex = 0\n\n        const streamInterval = setInterval(() => {\n          if (tokenIndex < message.tokens.length) {\n            currentContent += message.tokens[tokenIndex]\n            setStreamingContent(currentContent)\n            tokenIndex++\n          } else {\n            clearInterval(streamInterval)\n            setMessages((prev) => [...prev, message])\n            setStreamingMessageIndex(null)\n            setStreamingContent(\"\")\n            currentMessageIndex++\n\n            timeouts.push(setTimeout(addNextMessage, 500))\n          }\n        }, 100)\n\n        intervals.push(streamInterval)\n      } else {\n        setMessages((prev) => [...prev, message])\n        currentMessageIndex++\n\n        timeouts.push(setTimeout(addNextMessage, 800))\n      }\n    }\n\n    timeouts.push(setTimeout(addNextMessage, 1000))\n\n    return () => {\n      timeouts.forEach((timeout) => clearTimeout(timeout))\n      intervals.forEach((interval) => clearInterval(interval))\n    }\n  }, [])\n\n  return (\n    <div className=\"w-full space-y-4\">\n      <Conversation className=\"rounded-lg border\">\n        <ConversationContent>\n          {messages.length === 0 && streamingMessageIndex === null ? (\n            <ConversationEmptyState\n              title=\"Start a conversation\"\n              description=\"This is a simulated conversation with streaming responses\"\n            />\n          ) : (\n            <>\n              {messages.map((message) => (\n                <Message\n                  from={message.role}\n                  key={message.id}\n                  avatar={\n                    message.role === \"assistant\" ? (\n                      <Avatar\n                        size=\"md\"\n                        icon={<MessageCircle className=\"h-5 w-5\" />}\n                        bgColor=\"bg-gradient-to-br from-blue-500 to-blue-600\"\n                      />\n                    ) : (\n                      <Avatar\n                        size=\"md\"\n                        icon={<User className=\"h-5 w-5\" />}\n                        bgColor=\"bg-gradient-to-br from-green-500 to-green-600\"\n                      />\n                    )\n                  }\n                >\n                  <MessageContent>\n                    <Response>{message.text}</Response>\n                  </MessageContent>\n                </Message>\n              ))}\n              {streamingMessageIndex !== null && (\n                <Message\n                  from={allMessages[streamingMessageIndex].role}\n                  key={`streaming-${streamingMessageIndex}`}\n                  avatar={\n                    allMessages[streamingMessageIndex].role === \"assistant\" ? (\n                      <Avatar\n                        size=\"md\"\n                        icon={<MessageCircle className=\"h-5 w-5\" />}\n                        bgColor=\"bg-gradient-to-br from-blue-500 to-blue-600\"\n                      />\n                    ) : (\n                      <Avatar\n                        size=\"md\"\n                        icon={<User className=\"h-5 w-5\" />}\n                        bgColor=\"bg-gradient-to-br from-green-500 to-green-600\"\n                      />\n                    )\n                  }\n                >\n                  <MessageContent>\n                    <Response>{streamingContent || \"\\u200B\"}</Response>\n                  </MessageContent>\n                </Message>\n              )}\n            </>\n          )}\n        </ConversationContent>\n        <ConversationScrollButton />\n      </Conversation>\n\n      {/* Info */}\n      <div className=\"rounded-lg border p-4\">\n        <p className=\"mb-2 text-sm font-medium\">About Conversation</p>\n        <div className=\"text-muted-foreground space-y-1 text-xs\">\n          <p>\n            A scrollable conversation component with auto-scroll to bottom.\n            Shows user and assistant messages with avatars and token-based\n            streaming for realistic conversation simulation.\n          </p>\n          <p className=\"mt-2\">\n            <strong>Features:</strong> Auto-scroll, streaming responses, avatar\n            integration, empty state, scroll-to-bottom button\n          </p>\n          <p className=\"mt-2\">\n            <strong>Avatars:</strong> Assistant messages display MessageCircle\n            icon in blue, user messages display User icon in green\n          </p>\n        </div>\n      </div>\n    </div>\n  )\n}\n",
      "type": "registry:example"
    }
  ]
}
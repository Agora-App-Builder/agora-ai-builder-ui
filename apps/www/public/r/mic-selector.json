{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "mic-selector",
  "type": "registry:ui",
  "description": "A button with dropdown menu for selecting items, with mic icon and states",
  "registryDependencies": [
    "button",
    "dropdown-menu",
    "mic-button"
  ],
  "files": [
    {
      "path": "components/ui/mic-selector.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { Check, ChevronDown, Mic, MicOff } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\"\nimport { LiveWaveform } from \"@/components/ui/live-waveform\"\nimport type { MicButtonState } from \"@/components/ui/mic-button\"\n\nexport interface SelectItem {\n  value: string\n  label: string\n}\n\nexport interface MicSelectorProps {\n  items: SelectItem[]\n  value?: string\n  onValueChange?: (value: string) => void\n  disabled?: boolean\n  className?: string\n  /**\n   * Current state of the mic selector (idle, listening, processing, error)\n   * @default \"idle\"\n   */\n  state?: MicButtonState\n  /**\n   * Show error badge when in error state (indicates permission denied)\n   * @default false\n   */\n  showErrorBadge?: boolean\n}\n\nexport function MicSelector({\n  items,\n  value,\n  onValueChange,\n  disabled = false,\n  className,\n  state = \"idle\",\n  showErrorBadge = false,\n}: MicSelectorProps) {\n  const isListening = state === \"listening\"\n  const isProcessing = state === \"processing\"\n  const isError = state === \"error\"\n  const isActive = isListening || isProcessing\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <button\n          disabled={disabled || items.length === 0 || isError}\n          className={cn(\n            \"relative inline-flex items-center justify-center gap-1.5 rounded-lg border px-3 py-2 text-sm font-medium transition-colors\",\n            // Idle and active states\n            !isError &&\n              \"border-input bg-background hover:bg-accent focus-visible:ring-ring focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none\",\n            // Error state\n            isError &&\n              \"border-destructive bg-destructive/10 text-destructive hover:bg-destructive/20 focus-visible:ring-destructive cursor-not-allowed focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none\",\n            // Disabled\n            (disabled || items.length === 0) && \"cursor-not-allowed opacity-50\",\n            className\n          )}\n        >\n          {isError ? (\n            <MicOff className=\"h-4 w-4\" />\n          ) : (\n            <Mic className=\"h-4 w-4\" />\n          )}\n          {isActive && (\n            <LiveWaveform\n              active={isListening}\n              barColor={isProcessing ? \"#94a3b8\" : \"#3b82f6\"}\n              fadeEdges={false}\n            />\n          )}\n          <ChevronDown className=\"h-4 w-4 flex-shrink-0\" />\n\n          {/* Error badge - orange circle with exclamation */}\n          {isError && showErrorBadge && (\n            <div className=\"absolute -top-2 -right-2 flex h-5 w-5 items-center justify-center rounded-full bg-amber-400 text-amber-900\">\n              <span className=\"text-xs leading-none font-bold\">!</span>\n            </div>\n          )}\n        </button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"center\" side=\"top\" className=\"w-72\">\n        {items.length === 0 ? (\n          <div className=\"text-muted-foreground py-6 text-center text-sm\">\n            No items available\n          </div>\n        ) : (\n          items.map((item) => (\n            <DropdownMenuItem\n              key={item.value}\n              onClick={() => onValueChange?.(item.value)}\n              className=\"flex items-center justify-between\"\n              disabled={state === \"processing\" || state === \"error\"}\n            >\n              <span className=\"truncate\">{item.label}</span>\n              {value === item.value && (\n                <Check className=\"h-4 w-4 flex-shrink-0\" />\n              )}\n            </DropdownMenuItem>\n          ))\n        )}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  )\n}\n",
      "type": "registry:ui"
    },
    {
      "path": "examples/mic-selector-demo.tsx",
      "content": "\"use client\"\n\nimport { useState } from \"react\"\n\nimport {\n  MicSelector,\n  type SelectItem,\n} from \"@/components/ui/mic-selector\"\n\nconst voiceItems: SelectItem[] = [\n  { value: \"english\", label: \"English\" },\n  { value: \"spanish\", label: \"Spanish\" },\n  { value: \"french\", label: \"French\" },\n  { value: \"german\", label: \"German\" },\n  { value: \"chinese\", label: \"Mandarin Chinese\" },\n]\n\nexport default function MicSelectorDemo() {\n  const [selectedVoice, setSelectedVoice] = useState<string>(\"english\")\n  const [state, setState] = useState<\n    \"idle\" | \"listening\" | \"processing\" | \"error\"\n  >(\"idle\")\n\n  return (\n    <div className=\"w-full max-w-lg space-y-6\">\n      {/* Basic Example */}\n      <div className=\"rounded-lg border p-4\">\n        <p className=\"mb-3 text-sm font-medium\">Basic Selector</p>\n        <p className=\"text-muted-foreground mb-3 text-xs\">\n          Mic button + chevron. Click to open dropdown and select voice.\n        </p>\n        <div className=\"flex items-center gap-2\">\n          <MicSelector\n            items={voiceItems}\n            value={selectedVoice}\n            onValueChange={setSelectedVoice}\n          />\n        </div>\n        {selectedVoice && (\n          <p className=\"text-muted-foreground mt-3 text-sm\">\n            Selected:{\" \"}\n            <strong>\n              {voiceItems.find((v) => v.value === selectedVoice)?.label}\n            </strong>\n          </p>\n        )}\n      </div>\n\n      {/* State Examples */}\n      <div className=\"space-y-3\">\n        <p className=\"text-sm font-medium\">States</p>\n        <div className=\"space-y-2\">\n          {([\"idle\", \"listening\", \"processing\", \"error\"] as const).map((s) => (\n            <button\n              key={s}\n              onClick={() => setState(s)}\n              className=\"text-muted-foreground hover:text-foreground inline-flex items-center gap-2 rounded px-2 py-1 text-sm transition-colors\"\n            >\n              <input\n                type=\"radio\"\n                name=\"state\"\n                value={s}\n                checked={state === s}\n                onChange={(e) =>\n                  setState(\n                    e.target.value as\n                      | \"idle\"\n                      | \"listening\"\n                      | \"processing\"\n                      | \"error\"\n                  )\n                }\n                className=\"h-4 w-4\"\n              />\n              <span className=\"capitalize\">{s}</span>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* State Display */}\n      <div className=\"rounded-lg border p-4\">\n        <p className=\"mb-3 text-sm font-medium\">\n          States: <span className=\"text-foreground capitalize\">{state}</span>\n        </p>\n        <div className=\"flex items-center gap-3\">\n          <MicSelector\n            items={voiceItems}\n            value={selectedVoice}\n            onValueChange={setSelectedVoice}\n            state={state}\n          />\n        </div>\n        <div className=\"text-muted-foreground mt-4 space-y-2 text-xs\">\n          <p>\n            <strong>idle:</strong> Normal mic button, fully interactive\n          </p>\n          <p>\n            <strong>listening:</strong> Mic button with animated blue waveform\n          </p>\n          <p>\n            <strong>processing:</strong> Mic button with static gray waveform\n          </p>\n          <p>\n            <strong>error:</strong> Mic-off icon with red styling\n          </p>\n        </div>\n      </div>\n\n      {/* Error Badge Example */}\n      <div className=\"rounded-lg border p-4\">\n        <p className=\"mb-3 text-sm font-medium\">\n          Error with Permission Denied Badge\n        </p>\n        <div className=\"text-muted-foreground mb-3 text-xs\">\n          Use{\" \"}\n          <code className=\"bg-muted rounded px-1 py-0.5\">showErrorBadge</code>{\" \"}\n          prop to show permission error indicator\n        </div>\n        <div className=\"flex items-center gap-4\">\n          <div className=\"flex flex-col gap-2\">\n            <MicSelector\n              items={voiceItems}\n              value={selectedVoice}\n              onValueChange={setSelectedVoice}\n              state=\"error\"\n              showErrorBadge={false}\n            />\n            <span className=\"text-muted-foreground text-xs\">Without badge</span>\n          </div>\n          <div className=\"flex flex-col gap-2\">\n            <MicSelector\n              items={voiceItems}\n              value={selectedVoice}\n              onValueChange={setSelectedVoice}\n              state=\"error\"\n              showErrorBadge={true}\n            />\n            <span className=\"text-muted-foreground text-xs\">\n              Permission denied\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n",
      "type": "registry:example"
    }
  ]
}
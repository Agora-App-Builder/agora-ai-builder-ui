{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "mic-button",
  "type": "registry:ui",
  "description": "A button component with mic icon and states (idle, inactive, processing, error)",
  "registryDependencies": [
    "button"
  ],
  "files": [
    {
      "path": "components/ui/mic-button.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { ChevronDown, Mic, MicOff } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { LiveWaveform } from \"@/components/ui/live-waveform\"\n\nexport type MicButtonState = \"idle\" | \"listening\" | \"processing\" | \"error\"\n\nexport interface MicButtonProps extends React.HTMLAttributes<HTMLDivElement> {\n  /**\n   * Current state of the mic button\n   * @default \"idle\"\n   */\n  state?: MicButtonState\n\n  /**\n   * Icon to display (defaults to Mic icon)\n   */\n  icon?: React.ReactNode\n\n  /**\n   * Show error badge (orange circle with exclamation) when in error state\n   * Indicates permission denied or device access error\n   * @default false\n   */\n  showErrorBadge?: boolean\n}\n\nexport const MicButton = React.forwardRef<HTMLDivElement, MicButtonProps>(\n  (\n    {\n      state = \"idle\",\n      icon = <Mic className=\"h-4 w-4\" />,\n      showErrorBadge = false,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const isListening = state === \"listening\"\n    const isProcessing = state === \"processing\"\n    const isError = state === \"error\"\n    const isActive = isListening || isProcessing\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"relative inline-flex cursor-pointer items-center justify-center gap-2 rounded-lg border px-3 py-2 text-sm font-medium transition-colors\",\n          // Idle and active states\n          !isError &&\n            \"border-input bg-background hover:bg-accent focus-visible:ring-ring focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none\",\n          // Error state\n          isError &&\n            \"border-destructive bg-destructive/10 text-destructive hover:bg-destructive/20 focus-visible:ring-destructive focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        {isError ? <MicOff className=\"h-4 w-4\" /> : icon}\n        {isActive && (\n          <LiveWaveform\n            active={isListening}\n            barColor={isProcessing ? \"#94a3b8\" : \"#3b82f6\"}\n            fadeEdges={false}\n          />\n        )}\n        <ChevronDown className=\"h-4 w-4 flex-shrink-0\" />\n\n        {/* Error badge - orange circle with exclamation */}\n        {isError && showErrorBadge && (\n          <div className=\"absolute -top-2 -right-2 flex h-5 w-5 items-center justify-center rounded-full bg-amber-400 text-amber-900\">\n            <span className=\"text-xs leading-none font-bold\">!</span>\n          </div>\n        )}\n      </div>\n    )\n  }\n)\n\nMicButton.displayName = \"MicButton\"\n",
      "type": "registry:ui"
    },
    {
      "path": "examples/mic-button-demo.tsx",
      "content": "\"use client\"\n\nimport { useState } from \"react\"\n\nimport {\n  MicButton,\n  type MicButtonState,\n} from \"@/components/ui/mic-button\"\n\nexport default function MicButtonDemo() {\n  const [state, setState] = useState<MicButtonState>(\"idle\")\n\n  return (\n    <div className=\"w-full max-w-lg space-y-6\">\n      {/* State Controls */}\n      <div className=\"space-y-3\">\n        <p className=\"text-sm font-medium\">Select State</p>\n        <div className=\"space-y-2\">\n          {([\"idle\", \"listening\", \"processing\", \"error\"] as const).map((s) => (\n            <label\n              key={s}\n              className=\"text-muted-foreground hover:text-foreground inline-flex items-center gap-2 rounded px-2 py-1 text-sm transition-colors\"\n            >\n              <input\n                type=\"radio\"\n                name=\"state\"\n                value={s}\n                checked={state === s}\n                onChange={(e) => setState(e.target.value as MicButtonState)}\n                className=\"h-4 w-4\"\n              />\n              <span className=\"capitalize\">{s}</span>\n            </label>\n          ))}\n        </div>\n      </div>\n\n      {/* Component Display */}\n      <div className=\"rounded-lg border p-6\">\n        <p className=\"text-muted-foreground mb-4 text-sm\">\n          State:{\" \"}\n          <span className=\"text-foreground font-medium capitalize\">\n            {state}\n          </span>\n        </p>\n        <div className=\"flex items-center gap-4\">\n          <MicButton state={state} />\n          <MicButton state={state} size=\"default\" />\n          <MicButton state={state} size=\"lg\" />\n          <MicButton state={state} size=\"icon\" />\n        </div>\n      </div>\n\n      {/* States Description */}\n      <div className=\"rounded-lg border p-4\">\n        <p className=\"mb-3 text-sm font-medium\">State Descriptions</p>\n        <p className=\"text-muted-foreground mb-3 text-xs\">\n          All states include a chevron icon on the right for dropdown\n          indication.\n        </p>\n        <div className=\"text-muted-foreground space-y-2 text-xs\">\n          <div>\n            <strong>idle:</strong> Shows mic icon + chevron\n          </div>\n          <div>\n            <strong>listening:</strong> Shows mic icon + animated blue waveform\n            + chevron\n          </div>\n          <div>\n            <strong>processing:</strong> Shows mic icon + static gray waveform +\n            chevron\n          </div>\n          <div>\n            <strong>error:</strong> Shows mic-off icon + chevron in red\n          </div>\n        </div>\n      </div>\n\n      {/* Error Badge */}\n      <div className=\"rounded-lg border p-4\">\n        <p className=\"mb-3 text-sm font-medium\">\n          Error with Badge (Permission Denied)\n        </p>\n        <div className=\"text-muted-foreground space-y-2 text-xs\">\n          <p>When permission is denied or device access fails:</p>\n          <div className=\"mt-3 flex items-center gap-4\">\n            <div className=\"flex items-center gap-2\">\n              <MicButton state=\"error\" showErrorBadge={false} />\n              <span>Without badge</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <MicButton state=\"error\" showErrorBadge={true} />\n              <span>With badge (permission denied)</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Variants */}\n      <div className=\"rounded-lg border p-4\">\n        <p className=\"mb-4 text-sm font-medium\">Variants</p>\n        <div className=\"space-y-3\">\n          <div className=\"flex items-center gap-2\">\n            <MicButton state=\"idle\" variant=\"outline\" />\n            <span className=\"text-muted-foreground text-xs\">outline</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <MicButton state=\"idle\" variant=\"ghost\" />\n            <span className=\"text-muted-foreground text-xs\">ghost</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <MicButton state=\"idle\" variant=\"default\" />\n            <span className=\"text-muted-foreground text-xs\">default</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <MicButton state=\"error\" variant=\"destructive\" />\n            <span className=\"text-muted-foreground text-xs\">destructive</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n",
      "type": "registry:example"
    }
  ]
}